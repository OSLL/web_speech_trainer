### Юнит тесты
#### Сборка и запуск проекта
Собираем и запускаем проект с конфигом `config.ini` или `testing.ini`
```bash
$ docker compose build

$ APP_CONF=../app_conf/testing.ini docker compose up
```

#### Запуск тестов
Запускаем тесты следующей командой
```bash
$ docker exec web_speech_trainer-web-1 bash -c 'cd /project/tests && pytest --ignore=selenium'
```

`--ignore=selenium` необходим (`pytest -s . -k 'not selenium'` не сработает), чтобы pytest не смотрел на selenium тесты, которые будут собраны в другом контейнере, иначе будут ошибки (selenium тесты будут ссылаться на отсутствующие в текущем контейнере зависимости)
### Selenium тесты

#### Сборка и запуск проекта
Сборка и запуск проекта с selenium тестами осуществляется c конфигом `testing.ini` следующим образом
```bash
$ docker compose -f docker-compose.yml -f docker-compose-selenium.yml build

$ APP_CONF=../app_conf/testing.ini docker compose -f docker-compose.yml -f docker-compose-selenium.yml up
```
#### Запуск тестов
Чтобы запустить selenium тесты необходимо выполнить следующую команду
```bash
$ docker exec web_speech_trainer-selenium-tests-1 bash -c 'pytest .'
```
От сюда же можно запустить и юнит тесты, описанным в разделе юнит тестов способом
#### Структура selenium тестов
##### Selenium session
Запускаемые тесты используют фикстуру `selenium_session` со `scope="module"`, объявленную в `conftest.py`. Она регистрируется в системе и возвращает экземпляр класса `SeleniumSession` с запущенным и настроенным драйвером. В нашем случае `scope="module"` значит, что для всех тестов в одном модуле будет использоваться один экземпляр `SeleniumSession` (не будет пересоздаваться от теста к тесту в одном модуле).

При необходимости можно объявлять другие фикстуры с другими настройками драйвера, например убрать симуляцию аудиопотока.
##### Training session
Класс `TrainingSession` является надстройкой над `SeleniumSession`. Можно сказать, что это API взаимодействия с любой тренировкой. Причем `SeleniumSession` может передаваться между такими надстройками, что позволяет создавать различные сценарии для тестирования. 

Например, после завершения тренировки, использовать API для другой странички, чтобы полистать страничку со всеми тренировками и убедиться в наличии новой тренировки.
##### Test Main
`test_main.py` - входная точка тестирования, содержащая класс `TestMain`, который назовем сценарием тестирования. Данный класс может наследоваться от других сценариев тестирования, которые в данном контексте уже будут подсценариями. Например в `TestMain` используется подсценарий `SimpleTraining` проверяющий простую тренировку, но после тренировки можно использовать и другие подсценарии.

Исполнение тестов будет идти в порядке наследования, причем названия наследуемых классов не должны иметь префикс `Test`, иначе тесты могут дублироваться (вроде как принято использовать префикс `Base` для таких классов).

Наследование позволяет создавать различные сценарии тестирования. Каждый сценарий лучше описывать в отдельном файле вида `test_<название модуля с тестами>.py`, а их подсценарии либо в этом же файле, либо в файле без префикса `test_`, если планируется использование в других сценариях.